services:
  - type: web
    name: rankrise-audit-backend
    runtime: node
    plan: free
    buildCommand: npm install
    startCommand: npm start
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 3000
      - key: MAX_CONCURRENT
        value: 2
      - key: RATE_LIMIT_PER_IP
        value: 10
    headers:
      - path: "/*"
        name: "Access-Control-Allow-Origin"
        value: "https://teamrankrise.com"
      - path: "/*"
        name: "Access-Control-Allow-Methods"
        value: "GET, POST, OPTIONS"
      - path: "/*"
        name: "Access-Control-Allow-Headers"
        value: "Content-Type"

  - type: static_site
    name: rankrise-website
    buildCommand: echo "Static site - no build needed"
    staticPublishPath: ./
    routes:
      - path: /api/*
        destination: rankrise-audit-backend
