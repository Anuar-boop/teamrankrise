<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free SEO Audit — See Your Score Instantly | RankRise</title>
    <meta name="description" content="Enter your website URL and get an instant SEO score. See exactly what's holding you back on Google — and what it could look like with RankRise.">
    <link rel="canonical" href="https://teamrankrise.com/free-audit.html">
    <link rel="icon" href="/favicon.svg" type="image/svg+xml">
    <meta property="og:title" content="Free SEO Audit — See Your Score Instantly | RankRise">
    <meta property="og:description" content="Enter your website and see your SEO score vs. what it could be. Free, instant, no signup required.">
    <meta property="og:url" content="https://teamrankrise.com/free-audit.html">
    <meta property="og:type" content="website">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <style>
        .audit-hero {
            min-height: 60vh;
            display: flex;
            align-items: center;
            padding: 160px 0 80px;
            position: relative;
        }
        .audit-hero .hero-glow {
            position: absolute;
            width: 500px;
            height: 500px;
            border-radius: 50%;
            filter: blur(120px);
            opacity: 0.15;
            pointer-events: none;
        }
        .audit-hero .glow-1 { background: var(--emerald); top: -100px; left: -100px; }
        .audit-hero .glow-2 { background: var(--gold); bottom: -100px; right: -100px; opacity: 0.08; }
        .audit-hero-inner {
            max-width: 720px;
            margin: 0 auto;
            text-align: center;
        }
        .audit-hero-inner h1 { margin-bottom: 1.25rem; }
        .audit-hero-inner .hero-subtitle {
            font-size: 1.125rem;
            color: var(--text-secondary);
            margin-bottom: 3rem;
            max-width: 560px;
            margin-left: auto;
            margin-right: auto;
        }
        .audit-input-wrap {
            display: flex;
            gap: 0;
            max-width: 580px;
            margin: 0 auto;
            border-radius: var(--radius-lg);
            overflow: hidden;
            border: 1px solid var(--border);
            transition: border-color 0.3s var(--ease);
            background: var(--bg-surface);
        }
        .audit-input-wrap:focus-within {
            border-color: var(--emerald);
            box-shadow: 0 0 0 3px var(--emerald-dim);
        }
        .audit-input-wrap input {
            flex: 1;
            padding: 1rem 1.5rem;
            background: transparent;
            border: none;
            color: var(--text);
            font-family: inherit;
            font-size: 1rem;
            outline: none;
        }
        .audit-input-wrap input::placeholder { color: var(--text-muted); }
        .audit-input-wrap button {
            padding: 1rem 2rem;
            background: linear-gradient(135deg, var(--emerald), #059669);
            color: white;
            border: none;
            font-family: inherit;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: opacity 0.3s;
            white-space: nowrap;
        }
        .audit-input-wrap button:hover { opacity: 0.9; }
        .audit-input-wrap button:disabled { opacity: 0.5; cursor: not-allowed; }
        .audit-note { font-size: 0.8rem; color: var(--text-muted); margin-top: 1rem; }
        .audit-loading { display: none; text-align: center; padding: 4rem 0; }
        .audit-loading.active { display: block; }
        .spinner {
            width: 48px; height: 48px;
            border: 3px solid var(--border);
            border-top-color: var(--emerald);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin: 0 auto 1.5rem;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
        .loading-steps { list-style: none; max-width: 320px; margin: 0 auto; text-align: left; }
        .loading-steps li {
            padding: 0.5rem 0; font-size: 0.875rem; color: var(--text-muted);
            display: flex; align-items: center; gap: 0.75rem; transition: color 0.3s;
        }
        .loading-steps li.done { color: var(--emerald); }
        .loading-steps li .check {
            width: 18px; height: 18px; border-radius: 50%; border: 2px solid var(--border);
            display: flex; align-items: center; justify-content: center; flex-shrink: 0; transition: all 0.3s;
        }
        .loading-steps li.done .check { border-color: var(--emerald); background: var(--emerald-dim); }
        .audit-results { display: none; padding: 80px 0 140px; }
        .audit-results.active { display: block; }
        .comparison-grid {
            display: grid; grid-template-columns: 1fr auto 1fr;
            gap: 2rem; align-items: start; margin-bottom: 4rem;
        }
        .score-card {
            background: var(--bg-surface); border: 1px solid var(--border);
            border-radius: var(--radius-xl); padding: 3rem 2rem; text-align: center;
        }
        .score-card.current { border-color: rgba(239, 68, 68, 0.2); }
        .score-card.projected { border-color: var(--emerald-border); box-shadow: 0 0 40px var(--emerald-dim); }
        .score-card .card-label {
            font-size: 0.75rem; font-weight: 600; letter-spacing: 0.1em;
            text-transform: uppercase; margin-bottom: 2rem;
        }
        .score-card.current .card-label { color: #ef4444; }
        .score-card.projected .card-label { color: var(--emerald); }
        .score-circle { width: 180px; height: 180px; margin: 0 auto 1.5rem; position: relative; }
        .score-circle svg { width: 100%; height: 100%; transform: rotate(-90deg); }
        .score-circle .bg { stroke: var(--border); }
        .score-circle .progress { stroke-linecap: round; transition: stroke-dashoffset 1.5s var(--ease); }
        .score-circle.red .progress { stroke: #ef4444; }
        .score-circle.yellow .progress { stroke: #f59e0b; }
        .score-circle.green .progress { stroke: var(--emerald); }
        .score-number {
            position: absolute; inset: 0; display: flex;
            align-items: center; justify-content: center; flex-direction: column;
        }
        .score-number .value { font-size: 3rem; font-weight: 900; line-height: 1; }
        .score-circle.red .value { color: #ef4444; }
        .score-circle.yellow .value { color: #f59e0b; }
        .score-circle.green .value { color: var(--emerald); }
        .score-number .of { color: var(--text-muted); font-size: 0.875rem; }
        .score-grade { font-size: 0.875rem; color: var(--text-secondary); margin-top: 0.5rem; }
        .vs-badge { display: flex; align-items: center; justify-content: center; padding-top: 6rem; }
        .vs-badge span {
            display: inline-block; width: 48px; height: 48px; line-height: 48px;
            text-align: center; border-radius: 50%; background: var(--bg-surface);
            border: 1px solid var(--border); font-weight: 800; font-size: 0.8rem;
            color: var(--text-muted); letter-spacing: 0.05em;
        }
        .issues-section { margin-bottom: 3rem; }
        .issues-section h3 { margin-bottom: 1.5rem; }
        .issues-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
        .issue-item {
            display: flex; align-items: flex-start; gap: 0.75rem;
            padding: 1rem 1.25rem; background: var(--bg-surface);
            border: 1px solid var(--border); border-radius: var(--radius); font-size: 0.875rem;
        }
        .issue-item .icon {
            flex-shrink: 0; width: 20px; height: 20px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 0.7rem; font-weight: 700; margin-top: 1px;
        }
        .issue-item.fail .icon { background: rgba(239,68,68,0.15); color: #ef4444; }
        .issue-item.pass .icon { background: var(--emerald-dim); color: var(--emerald); }
        .issue-item .text { color: var(--text-secondary); }
        .issue-item.pass .text { color: var(--emerald); text-decoration: line-through; text-decoration-color: rgba(16,185,129,0.3); }
        .audit-cta {
            text-align: center; max-width: 640px; margin: 0 auto; padding: 3rem;
            background: var(--bg-surface); border: 1px solid var(--emerald-border);
            border-radius: var(--radius-xl); position: relative; overflow: hidden;
        }
        .audit-cta::before {
            content: ''; position: absolute; inset: -1px; border-radius: inherit; padding: 1px;
            background: linear-gradient(135deg, var(--emerald), var(--gold));
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor; mask-composite: exclude; pointer-events: none;
        }
        .audit-cta h2 { font-size: 1.75rem; margin-bottom: 1rem; }
        .audit-cta p { max-width: 480px; margin: 0 auto 2rem; }
        .audit-cta .btn-row { display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; }
        .audit-error { display: none; text-align: center; padding: 2rem; color: #ef4444; }
        .audit-error.active { display: block; }
        .domain-name { font-weight: 700; color: var(--text); }
        @media (max-width: 768px) {
            .comparison-grid { grid-template-columns: 1fr; }
            .vs-badge { padding: 0; transform: rotate(90deg); }
            .issues-grid { grid-template-columns: 1fr; }
            .audit-input-wrap { flex-direction: column; }
            .audit-input-wrap button { border-radius: 0; }
        }
    </style>
</head>
<body>

<svg class="noise-overlay" width="100%" height="100%">
    <filter id="noise">
        <feTurbulence type="fractalNoise" baseFrequency="0.65" numOctaves="3" stitchTiles="stitch"/>
        <feColorMatrix type="saturate" values="0"/>
    </filter>
    <rect width="100%" height="100%" filter="url(#noise)"/>
</svg>

<nav class="navbar scrolled" id="navbar">
    <div class="nav-inner">
        <a href="/" class="nav-logo">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M4 18L8 6h1.5L13 14l3-10h1.5" stroke="#10b981" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            RankRise
        </a>
        <ul class="nav-menu" id="navMenu">
            <li><a href="/">Home</a></li>
            <li><a href="/services.html">Services</a></li>
            <li><a href="/case-studies.html">Results</a></li>
            <li><a href="/blog/">Blog</a></li>
            <li><a href="/about.html">About</a></li>
            <li class="nav-cta"><a href="tel:+16036058532" class="btn-nav">Call (603) 605-8532</a></li>
        </ul>
    </div>
</nav>

<section class="audit-hero" id="auditHero">
    <div class="hero-glow glow-1"></div>
    <div class="hero-glow glow-2"></div>
    <div class="container">
        <div class="audit-hero-inner">
            <span class="label">Free Instant SEO Audit</span>
            <h1>How Does Your Website<br>Score on Google?</h1>
            <p class="hero-subtitle">Enter your URL below. We'll analyze your site in real-time and show you exactly what's holding you back — and what it could look like with professional SEO.</p>
            <div class="audit-input-wrap" id="auditForm">
                <input type="url" id="urlInput" placeholder="https://yourbusiness.com" autocomplete="url" autofocus>
                <button id="analyzeBtn">Analyze My Site</button>
            </div>
            <p class="audit-note">100% free. No signup required. Results in ~20-30 seconds.</p>
        </div>
    </div>
</section>

<div class="audit-loading container" id="loadingSection">
    <div class="spinner"></div>
    <p style="color: var(--text); font-weight: 600; margin-bottom: 1.5rem;">Analyzing <span class="domain-name" id="loadingDomain"></span></p>
    <ul class="loading-steps" id="loadingSteps">
        <li id="step1"><div class="check"></div> Checking page speed &amp; performance</li>
        <li id="step2"><div class="check"></div> Analyzing SEO best practices</li>
        <li id="step3"><div class="check"></div> Auditing accessibility</li>
        <li id="step4"><div class="check"></div> Calculating projected improvements</li>
    </ul>
</div>

<div class="audit-error container" id="errorSection">
    <div style="max-width: 480px; margin: 0 auto; background: var(--bg-surface); border: 1px solid var(--border); border-radius: var(--radius-xl); padding: 2.5rem; text-align: center;">
        <p style="font-size: 1.125rem; font-weight: 600; color: var(--text);">We'll Send Your Audit Report</p>
        <p id="errorMsg" style="color: var(--text-muted); font-size: 0.875rem; margin-top: 0.5rem;"></p>
        <p style="color: var(--text-secondary); font-size: 0.9rem; margin-top: 1rem;">Drop your email and we'll send a full SEO audit within 24 hours — free.</p>
        <div id="fallbackForm" style="margin-top: 1.25rem;">
            <div style="display: flex; gap: 0; border-radius: var(--radius-lg); overflow: hidden; border: 1px solid var(--border);">
                <input type="email" id="fallbackEmail" placeholder="you@business.com" style="flex: 1; padding: 0.85rem 1.25rem; background: transparent; border: none; color: var(--text); font-family: inherit; font-size: 0.95rem; outline: none;">
                <button id="fallbackBtn" style="padding: 0.85rem 1.5rem; background: linear-gradient(135deg, var(--emerald), #059669); color: white; border: none; font-family: inherit; font-size: 0.9rem; font-weight: 600; cursor: pointer; white-space: nowrap;">Send My Audit</button>
            </div>
        </div>
        <p id="fallbackSuccess" style="display: none; color: var(--emerald); font-weight: 600; margin-top: 1.25rem;">We'll email your audit within 24 hours.</p>
        <p style="margin-top: 1.25rem;"><a id="retryLink" href="#" style="color: var(--emerald); font-size: 0.85rem;">Try another URL</a></p>
    </div>
</div>

<section class="audit-results container" id="resultsSection">
    <div class="comparison-grid">
        <div class="score-card current">
            <div class="card-label">Your Current Score</div>
            <div class="score-circle" id="currentCircle">
                <svg viewBox="0 0 120 120">
                    <circle class="bg" cx="60" cy="60" r="54" fill="none" stroke-width="8"/>
                    <circle class="progress" cx="60" cy="60" r="54" fill="none" stroke-width="8"
                        stroke-dasharray="339.29" stroke-dashoffset="339.29" id="currentProgress"/>
                </svg>
                <div class="score-number">
                    <div class="value" id="currentScore">0</div>
                    <div class="of">/100</div>
                </div>
            </div>
            <div class="score-grade" id="currentGrade">Analyzing...</div>
        </div>
        <div class="vs-badge"><span>VS</span></div>
        <div class="score-card projected">
            <div class="card-label">With RankRise</div>
            <div class="score-circle green" id="projectedCircle">
                <svg viewBox="0 0 120 120">
                    <circle class="bg" cx="60" cy="60" r="54" fill="none" stroke-width="8"/>
                    <circle class="progress" cx="60" cy="60" r="54" fill="none" stroke-width="8"
                        stroke-dasharray="339.29" stroke-dashoffset="339.29" id="projectedProgress"/>
                </svg>
                <div class="score-number">
                    <div class="value" id="projectedScore">0</div>
                    <div class="of">/100</div>
                </div>
            </div>
            <div class="score-grade" id="projectedGrade">After optimization</div>
        </div>
    </div>
    <div class="issues-section">
        <h3>Issues Found on <span class="domain-name" id="resultsDomain"></span></h3>
        <div class="issues-grid" id="issuesGrid"></div>
    </div>
    <div class="audit-cta">
        <h2>Want Us to Fix These?</h2>
        <p>Get a detailed SEO roadmap and 30 days of free optimization. No contracts, no obligation — you only pay if you see results.</p>
        <div class="btn-row">
            <a href="/contact.html" class="btn btn-gradient btn-lg" id="ctaLink">Get My Free Roadmap</a>
            <a href="mailto:alex@teamrankrise.com" class="btn btn-ghost btn-lg">Email Alex Directly</a>
        </div>
    </div>
</section>

<footer class="footer">
    <div class="container">
        <div class="footer-grid">
            <div class="footer-brand">
                <a href="/" class="nav-logo" style="margin-bottom: 0.75rem;">
                    <svg viewBox="0 0 24 24" fill="none"><path d="M4 18L8 6h1.5L13 14l3-10h1.5" stroke="#10b981" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                    RankRise
                </a>
                <p style="font-size: 0.875rem;">NH's local search specialists.<br>Helping businesses get found on Google.</p>
            </div>
            <div class="footer-links">
                <h4>Services</h4>
                <ul>
                    <li><a href="/services.html#local-seo">Local SEO</a></li>
                    <li><a href="/services.html#gbp">GBP Optimization</a></li>
                    <li><a href="/services.html#on-page">On-Page SEO</a></li>
                    <li><a href="/services.html#technical">Technical SEO</a></li>
                    <li><a href="/free-audit.html">Free SEO Audit</a></li>
                </ul>
            </div>
            <div class="footer-links">
                <h4>Company</h4>
                <ul>
                    <li><a href="/about.html">About</a></li>
                    <li><a href="/case-studies.html">Case Studies</a></li>
                    <li><a href="/blog/">Blog</a></li>
                    <li><a href="/contact.html">Contact</a></li>
                </ul>
            </div>
            <div class="footer-links">
                <h4>Legal</h4>
                <ul>
                    <li><a href="/privacy.html">Privacy Policy</a></li>
                    <li><a href="/terms.html">Terms of Service</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p><a href="mailto:alex@teamrankrise.com">alex@teamrankrise.com</a> &middot; <a href="tel:+16036058532">(603) 605-8532</a> &middot; New Hampshire, USA</p>
            <p>&copy; 2026 RankRise SEO. All rights reserved.</p>
        </div>
    </div>
</footer>

<script>
(function() {
    'use strict';

    var CIRCUMFERENCE = 2 * Math.PI * 54;

    var ISSUE_MAP = {
        'meta-description': 'Missing or poor meta description',
        'document-title': 'Missing or weak page title',
        'link-text': 'Non-descriptive link text',
        'hreflang': 'Missing hreflang tags',
        'canonical': 'Missing canonical URL',
        'robots-txt': 'No robots.txt found',
        'crawlable-anchors': 'Links not crawlable by search engines',
        'is-crawlable': 'Page blocked from crawling',
        'image-alt': 'Images missing alt text',
        'viewport': 'Not mobile-friendly (no viewport)',
        'font-size': 'Text too small for mobile',
        'tap-targets': 'Touch targets too small',
        'plugins': 'Uses incompatible plugins',
        'speed-index': 'Slow page speed',
        'largest-contentful-paint': 'Slow content loading (LCP)',
        'total-blocking-time': 'Page freezes during load (TBT)',
        'cumulative-layout-shift': 'Layout shifts during load (CLS)',
        'first-contentful-paint': 'Slow first paint (FCP)',
        'render-blocking-resources': 'Render-blocking resources',
        'unused-css-rules': 'Unused CSS code',
        'unused-javascript': 'Unused JavaScript code',
        'uses-responsive-images': 'Images not optimized for size',
        'uses-text-compression': 'Text not compressed (gzip)',
        'uses-optimized-images': 'Images not compressed'
    };

    function normalizeUrl(input) {
        var url = input.trim();
        if (!url) return null;
        if (!/^https?:\/\//i.test(url)) url = 'https://' + url;
        try { return new URL(url).href; } catch(e) { return null; }
    }

    function getDomain(url) {
        try { return new URL(url).hostname.replace('www.', ''); } catch(e) { return url; }
    }

    function scoreColor(score) {
        if (score < 50) return 'red';
        if (score < 90) return 'yellow';
        return 'green';
    }

    function gradeLabel(score) {
        if (score >= 90) return 'Excellent';
        if (score >= 70) return 'Good — Room to Improve';
        if (score >= 50) return 'Needs Work';
        return 'Poor — Losing Customers';
    }

    function animateScore(valueId, progressId, circleId, score) {
        var el = document.getElementById(valueId);
        var prog = document.getElementById(progressId);
        var circle = document.getElementById(circleId);
        circle.className = 'score-circle ' + scoreColor(score);
        var offset = CIRCUMFERENCE - (score / 100) * CIRCUMFERENCE;
        prog.style.strokeDashoffset = String(offset);
        var current = 0;
        var step = Math.max(1, Math.floor(score / 30));
        var interval = setInterval(function() {
            current += step;
            if (current >= score) { current = score; clearInterval(interval); }
            el.textContent = String(current);
        }, 40);
    }

    function showStep(n) {
        document.getElementById('step' + n).classList.add('done');
    }

    function createIssueElement(label, pass) {
        var div = document.createElement('div');
        div.className = 'issue-item ' + (pass ? 'pass' : 'fail');

        var icon = document.createElement('div');
        icon.className = 'icon';
        icon.textContent = pass ? '\u2713' : '\u2717';

        var text = document.createElement('div');
        text.className = 'text';
        text.textContent = label;

        div.appendChild(icon);
        div.appendChild(text);
        return div;
    }

    function resetAudit() {
        document.getElementById('auditHero').style.display = '';
        document.getElementById('loadingSection').classList.remove('active');
        document.getElementById('errorSection').classList.remove('active');
        document.getElementById('resultsSection').classList.remove('active');
        document.getElementById('urlInput').value = '';
        document.getElementById('urlInput').focus();
    }

    function runAudit() {
        var input = document.getElementById('urlInput').value;
        var url = normalizeUrl(input);
        if (!url) { document.getElementById('urlInput').focus(); return; }

        var domain = getDomain(url);
        var btn = document.getElementById('analyzeBtn');
        btn.disabled = true;
        btn.textContent = 'Analyzing...';

        document.getElementById('loadingDomain').textContent = domain;
        document.getElementById('auditHero').style.display = 'none';
        document.getElementById('loadingSection').classList.add('active');
        document.getElementById('errorSection').classList.remove('active');
        document.getElementById('resultsSection').classList.remove('active');

        var steps = document.querySelectorAll('.loading-steps li');
        for (var i = 0; i < steps.length; i++) steps[i].classList.remove('done');

        // Call our Lighthouse backend API
        // Fast, accurate audits with no external dependencies
        var apiUrl = '/api/audit?url=' + encodeURIComponent(url);

        showStep(1);

        fetch(apiUrl).then(function(res) {
            showStep(2);
            if (res.status === 429) throw new Error('429');
            if (!res.ok) {
                var errMsg = 'Could not analyze this website. ';
                if (res.status === 400 || res.status === 404) {
                    errMsg += 'Please check the URL format and try again.';
                } else if (res.status === 502 || res.status === 503) {
                    errMsg += 'Our analyzer is temporarily unavailable. Please try again in a moment.';
                } else {
                    errMsg += 'Please try again.';
                }
                throw new Error(errMsg);
            }
            return res.json();
        }).then(function(data) {
            showStep(3);

            // Parse Lighthouse response format
            var categories = data.categories || {};
            var seoScore = categories.seo || 0;
            var perfScore = categories.performance || 0;
            var audits = data.audits || {};

            var issues = [];
            var keys = Object.keys(ISSUE_MAP);
            for (var k = 0; k < keys.length; k++) {
                var key = keys[k];
                if (audits[key]) {
                    var audit = audits[key];
                    var pass = audit.score === 1 || audit.score === null;
                    issues.push({ label: ISSUE_MAP[key], pass: pass });
                }
            }

            issues.sort(function(a, b) { return (a.pass ? 1 : 0) - (b.pass ? 1 : 0); });

            var failCount = issues.filter(function(i) { return !i.pass; }).length;
            var projectedSeo = Math.min(100, seoScore + Math.round(failCount * 3.5) + 8);

            showStep(4);

            setTimeout(function() {
                document.getElementById('loadingSection').classList.remove('active');
                document.getElementById('resultsSection').classList.add('active');
                document.getElementById('resultsDomain').textContent = domain;

                document.getElementById('currentGrade').textContent = gradeLabel(seoScore);
                document.getElementById('projectedGrade').textContent = gradeLabel(projectedSeo);
                animateScore('currentScore', 'currentProgress', 'currentCircle', seoScore);
                animateScore('projectedScore', 'projectedProgress', 'projectedCircle', projectedSeo);

                var grid = document.getElementById('issuesGrid');
                while (grid.firstChild) grid.removeChild(grid.firstChild);
                for (var j = 0; j < issues.length; j++) {
                    grid.appendChild(createIssueElement(issues[j].label, issues[j].pass));
                }

                document.getElementById('ctaLink').href = '/contact.html?utm_source=audit_tool&domain=' + encodeURIComponent(domain);

                // Silently capture as lead
                try {
                    var formData = new FormData();
                    formData.append('domain', domain);
                    formData.append('url', url);
                    formData.append('seo_score', String(seoScore));
                    formData.append('perf_score', String(perfScore));
                    formData.append('issues_found', String(failCount));
                    formData.append('_subject', 'Audit Tool Lead: ' + domain + ' (Score: ' + seoScore + ')');
                    formData.append('_template', 'table');
                    fetch('https://formsubmit.co/ajax/alex@teamrankrise.com', {
                        method: 'POST',
                        body: formData
                    }).catch(function() {});
                } catch(e) {}

                btn.disabled = false;
                btn.textContent = 'Analyze My Site';
            }, 600);

        }).catch(function(err) {
            document.getElementById('loadingSection').classList.remove('active');

            // Still capture the lead even on error
            try {
                var formData = new FormData();
                formData.append('domain', domain);
                formData.append('url', url);
                formData.append('seo_score', 'API_ERROR');
                formData.append('issues_found', 'pending_manual');
                formData.append('_subject', 'Audit Lead (API limit): ' + domain);
                formData.append('_template', 'table');
                fetch('https://formsubmit.co/ajax/alex@teamrankrise.com', {
                    method: 'POST',
                    body: formData
                }).catch(function() {});
            } catch(e2) {}

            // Show friendly fallback instead of error
            var errSection = document.getElementById('errorSection');
            errSection.classList.add('active');
            var msg = document.getElementById('errorMsg');
            var isRateLimit = (err.message || '').indexOf('429') !== -1 ||
                             (err.message || '').indexOf('Quota') !== -1 ||
                             (err.message || '').indexOf('rate') !== -1;
            if (isRateLimit) {
                msg.textContent = 'Our instant analyzer is temporarily at capacity due to high demand.';
            } else {
                msg.textContent = err.message || 'We couldn\'t reach that website. Please check the URL and try again.';
            }
            btn.disabled = false;
            btn.textContent = 'Analyze My Site';
        });
    }

    document.getElementById('analyzeBtn').addEventListener('click', runAudit);
    document.getElementById('retryLink').addEventListener('click', function(e) { e.preventDefault(); resetAudit(); });
    document.getElementById('urlInput').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') runAudit();
    });
    document.getElementById('fallbackBtn').addEventListener('click', function() {
        var email = document.getElementById('fallbackEmail').value.trim();
        if (!email || email.indexOf('@') === -1) { document.getElementById('fallbackEmail').focus(); return; }
        var formData = new FormData();
        formData.append('email', email);
        formData.append('domain', document.getElementById('loadingDomain').textContent);
        formData.append('request', 'manual_audit');
        formData.append('_subject', 'Manual Audit Request: ' + document.getElementById('loadingDomain').textContent);
        formData.append('_template', 'table');
        fetch('https://formsubmit.co/ajax/alex@teamrankrise.com', { method: 'POST', body: formData }).catch(function() {});
        document.getElementById('fallbackForm').style.display = 'none';
        document.getElementById('fallbackSuccess').style.display = 'block';
    });
})();
</script>

</body>
</html>
